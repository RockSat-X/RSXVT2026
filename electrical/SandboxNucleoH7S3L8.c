#include "defs.h"
#include "jig.c"



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



INTERRUPT_Default
{
    panic;
}



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



static noret void
task_a(void*)
{
    for(;;)
    {
        GPIO_TOGGLE(led_green);
        vTaskDelay(10);
    }
}



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



static noret void
task_b(void*)
{
    for(;;)
    {
        GPIO_TOGGLE(led_yellow);
        vTaskDelay(15);
    }
}



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



static noret void
task_c(void*)
{
    for(;;)
    {
        GPIO_TOGGLE(led_red);
        vTaskDelay(20);
    }
}



////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



extern noret void
main(void)
{
    SYSTEM_init();
    JIG_init();

    #if TARGET_USES_FREERTOS

        FREERTOS_init();

    #else

        for (;;)
        {
            GPIO_TOGGLE(led_green);
            spinlock_nop(100'000'000);
        }

    #endif
}
